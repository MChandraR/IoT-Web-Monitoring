<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/static/font/ubuntu.css">
    <link rel="stylesheet" href="/static/css/realtime.css">
</head>
<style>
    body{
        background-image: url("/static/images/background/6.jfif");
        background-repeat: no-repeat;
        background-size: cover;
        height: 100vh;
        overflow-x: hidden;
    }
</style>
<body>
    <div>
        <a class="back" href="/dashboard">Back</a>
        <h1 class="title">Realtime Sensor</h1>
        <div class="time-area">
            <h2 id="time">00:00</h2>
            <h2 id="date">Sun, 01 Jan 2024</h2>
        </div>
    
        <div class="data-area">
            <div class="data-info">
                <img src="/static/images/gif/thermometer-unscreen2.gif" alt="">
                <h3 id="temp">30</h3>
            </div>
            <div class="data-info">
                <img src="/static/images/gif/humidity-unscreen2.gif" alt="">
                <h3 id="hum">30</h3>
            </div>
            <div class="data-info">
                <img src="/static/images/gif/wind-unscreen.gif" alt="">
                <h3 id="wind">30</h3>
            </div>
            <div class="data-info">
                <img src="/static/images/gif/gauge-unscreen.gif" alt="">
                <h3 id="pressure">30</h3>
            </div>
            <div class="data-info battery">
                <img src="/static/images/gif/energy-unscreen2.gif" alt="">
                <h3 id="battery">30</h3>
            </div>
        </div>
    </div>
</body>
</html>

<script>
    let dates = document.getElementById('date');
    let time = document.getElementById('time');
    let bulan = ["Januari", "Februari", "Maret", "Arpil", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"]
    let hari = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"]
    function updateTime(){
        let date = new Date();
        dates.innerHTML = (`${hari[date.getDay()]}, ${date.getDate()} ${bulan[date.getMonth()]} ${date.getFullYear()}`);
        time.innerHTML = (`${('00'+date.getHours()).slice(-2)}:${('00'+date.getMinutes()).slice(-2)}`);
    }
    updateTime();
    setInterval(updateTime, 1000);

    let temp = document.getElementById('temp');
    let hum = document.getElementById('hum');
    let wind = document.getElementById('wind');
    let battery = document.getElementById('battery');
    let pressure = document.getElementById('pressure');

    async function randData(){
        let data = await fetch('/data');

        let res = await data.json();
        data = res.data[0];
        console.log(data);

        temp.innerHTML = data.suhu+ "Â°C";
        hum.innerHTML = data.kelembaban + "%";
        wind.innerHTML = data.windspeed + " knot";
        pressure.innerHTML = data.tekanan + " Pa";
        battery.innerHTML =  data.tegangan+"V";
    }
    randData();
    setInterval(randData, 1000);

</script>